{"version":3,"sources":["webpack:///./src/views/AdminMainList.vue?9ab2","webpack:///./src/apis/admin.js","webpack:///./src/views/AdminMainList.vue?3b17","webpack:///src/views/AdminMainList.vue","webpack:///./src/views/AdminMainList.vue?0779","webpack:///./src/views/AdminMainList.vue"],"names":["getAdminToken","localStorage","getItem","getTweetsList","apiHelper","get","headers","Authorization","deleteTweet","tweetId","delete","getUsersList","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","card","key","id","attrs","_f","tweetedUser","avatar","_s","name","account","createdAt","description","isProcessing","on","$event","stopPropagation","preventDefault","deleteTweetButton","staticRenderFns","mixins","data","adminMainList","created","fetchTweets","filters","descriptionText","length","substr","methods","adminAPI","Toast","icon","title","component"],"mappings":"gHAAA,W,kCCAA,gBACMA,EAAgB,kBAAMC,aAAaC,QAAQ,eAElC,QACbC,cADa,WAEX,OAAOC,OAAUC,IAAV,gBAA+B,CAAEC,QAAS,CAAEC,cAAe,UAAF,OAAYP,SAE9EQ,YAJa,SAIDC,GACV,OAAOL,OAAUM,OAAV,wBAAkCD,GAAW,CAAEH,QAAS,CAAEC,cAAe,UAAF,OAAYP,SAE5FW,aAPa,WAQX,OAAOP,OAAUC,IAAV,eAA8B,CAAEC,QAAS,CAAEC,cAAe,UAAF,OAAYP,W,yCCX/E,IAAIY,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,OAAO,CAACN,EAAIO,GAAG,UAAUP,EAAIQ,GAAIR,EAAiB,eAAE,SAASS,GAAM,OAAOL,EAAG,MAAM,CAACM,IAAID,EAAKE,GAAGL,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIa,GAAG,aAAPb,CAAqBS,EAAKK,YAAYC,QAAQ,IAAM,QAAQX,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,IAAI,CAACJ,EAAIO,GAAG,IAAIP,EAAIgB,GAAGP,EAAKK,YAAYG,MAAM,KAAKb,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAG,KAAKP,EAAIgB,GAAGP,EAAKK,YAAYI,SAAS,IAAIlB,EAAIgB,GAAGhB,EAAIa,GAAG,aAAPb,CAAqBS,EAAKK,YAAYK,YAAY,SAASf,EAAG,IAAI,CAACE,YAAY,oBAAoB,CAACN,EAAIO,GAAGP,EAAIgB,GAAGhB,EAAIa,GAAG,kBAAPb,CAA0BS,EAAKW,mBAAmBhB,EAAG,SAAS,CAACE,YAAY,cAAcM,MAAM,CAAC,SAAWZ,EAAIqB,cAAcC,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBzB,EAAI0B,kBAAkBjB,EAAKE,OAAO,CAACX,EAAIO,GAAG,aAAY,MACp8BoB,EAAkB,G,4DC+BP,GACbV,KAAMA,gBACNW,OAAQA,CAACA,eACTC,KAHF,WAII,MAAO,CACLC,cAAeA,GACfT,cAAcA,IAGlBU,QATF,WAUI9B,KAAK+B,eAEPC,QAASA,CACPC,gBADJ,SACAd,GACM,OAAIA,EAAYe,OAAS,GAChBf,EAAYgB,OAAO,EAAG,IAAM,MAE5BhB,IAIbiB,QAASA,CACPL,YADJ,WACA,yLAEAM,uBAFA,gBAEAT,EAFA,EAEAA,KACA,kBAHA,mDAKAU,aACAC,aACAC,2BAPA,4DAWIf,kBAZJ,SAYA9B,GAAA,wKAEA,kBAFA,SAGA0C,sBAHA,uBAIA,gBAJA,OAMAC,aACAC,eACAC,iBAIA,kBAZA,qDAcA,kBACAF,aACAC,aACAC,2BAjBA,+DCjEuV,I,wBCQnVC,EAAY,eACd,EACA3C,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAe,E","file":"js/chunk-6a283ef9.ec904eb8.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminMainList.vue?vue&type=style&index=0&id=f2e7e70a&scoped=true&lang=scss&\"","import { apiHelper } from './../utils/helpers'\nconst getAdminToken = () => localStorage.getItem('adminToken')\n\nexport default {\n  getTweetsList() {\n    return apiHelper.get(`/admin/tweets`, { headers: { Authorization: `Bearer ${getAdminToken()}` } })\n  },\n  deleteTweet(tweetId) {\n    return apiHelper.delete(`/admin/tweets/${tweetId}`, { headers: { Authorization: `Bearer ${getAdminToken()}` } })\n  },\n  getUsersList() {\n    return apiHelper.get(`/admin/users`, { headers: { Authorization: `Bearer ${getAdminToken()}` } })\n  },\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"AdminMainList\"},[_c('div',[_c('h6',{staticClass:\"m-3\"},[_vm._v(\"推文清單\")]),_vm._l((_vm.adminMainList),function(card){return _c('div',{key:card.id,staticClass:\"cards\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(card.tweetedUser.avatar),\"alt\":\"\"}})]),_c('div',{staticClass:\"card-content\"},[_c('p',[_vm._v(\" \"+_vm._s(card.tweetedUser.name)+\" \"),_c('span',{staticClass:\"card-account\"},[_vm._v(\" @\"+_vm._s(card.tweetedUser.account)+\"・\"+_vm._s(_vm._f(\"formatDate\")(card.tweetedUser.createdAt))+\" \")])]),_c('p',{staticClass:\"card-description\"},[_vm._v(_vm._s(_vm._f(\"descriptionText\")(card.description)))])]),_c('button',{staticClass:\"card-button\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteTweetButton(card.id)}}},[_vm._v(\"×\")])])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"AdminMainList\">\n    <div>\n      <h6 class=\"m-3\">推文清單</h6>\n      <div class=\"cards\" v-for=\"card in adminMainList\" :key=\"card.id\">\n        <div class=\"avatar\">\n          <img :src=\"card.tweetedUser.avatar | emptyImage\" alt=\"\">\n        </div>\n        <div class=\"card-content\">\n          <p>\n            {{card.tweetedUser.name}} \n            <span class=\"card-account\">\n              @{{card.tweetedUser.account}}・{{card.tweetedUser.createdAt | formatDate}}\n            </span>\n          </p>\n          <p class=\"card-description\">{{card.description | descriptionText}}</p>\n        </div>\n        <button class=\"card-button\" \n        @click.stop.prevent=\"deleteTweetButton(card.id)\"\n        :disabled=\"isProcessing\"\n        >&#215;</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport adminAPI from \"../apis/admin\";\nimport { Toast } from \"../utils/helpers\";\nimport { emptyImageFilter } from '../utils/mixins'\nimport { formatDateFilter } from \"./../utils/mixins\";\n\nexport default {\n  name: 'AdminMainList',\n  mixins: [ emptyImageFilter, formatDateFilter ],\n  data() {\n    return {\n      adminMainList: [],\n      isProcessing: false\n    }\n  },\n  created() {\n    this.fetchTweets()\n  },\n  filters: {\n    descriptionText(description) {\n      if (description.length > 50) {\n        return description.substr(0, 50) + '...'\n      } else {\n        return description\n      }    \n    }\n  },\n  methods: {\n    async fetchTweets() {\n       try {\n        const { data } = await adminAPI.getTweetsList()\n        this.adminMainList = data\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得推文資料，請稍後再試..'\n        })\n      }\n    },\n    async deleteTweetButton(tweetId) {\n      try {\n        this.isProcessing = true\n        await adminAPI.deleteTweet(tweetId)\n        await this.fetchTweets()\n\n        Toast.fire({\n          icon: \"success\",\n          title: '成功刪除推文',\n        });\n\n\n        this.isProcessing = false\n      } catch (error) {\n        this.isProcessing = false\n        Toast.fire({\n          icon: 'error',\n          title: '無法刪除推文資料，請稍後再試..'\n        })\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n  @import '../assets/scss/_color.scss';\n  .AdminMainList {\n    width: 65%;\n    height: 100%;\n    overflow-y: scroll;\n    border-left: 1px solid $modal-outline;\n    flex-grow: 1;\n  }\n  h6 {\n    font-weight: 700;\n    font-size: 18px;\n  }\n  .cards {\n    position: relative;\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    width: 100%;\n    border-top: 1px solid $modal-outline;\n  }\n  .avatar {\n    width: 50px;\n    height: 50px;\n    margin-left: 10px;\n    border-radius: 50%;\n  }\n  .card-content {\n    width: 90%;\n    margin-left: 10px;\n    padding: 10px;\n  }\n  .card-account{\n    color: $text-gray;\n  }\n  .card-description {\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  .card-button {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 50px;\n    font-weight: 700;\n    font-size: 18px;\n    color: $text-gray;\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminMainList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminMainList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminMainList.vue?vue&type=template&id=f2e7e70a&scoped=true&\"\nimport script from \"./AdminMainList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminMainList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminMainList.vue?vue&type=style&index=0&id=f2e7e70a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2e7e70a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
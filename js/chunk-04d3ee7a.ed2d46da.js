(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04d3ee7a"],{"0192":function(e,t,r){},"22ba":function(e,t,r){"use strict";r("fae7")},4575:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"d-flex flex-column align-items-center w-100",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.afterSubmit.apply(null,arguments)}}},[e._l(e.forms,(function(t){return r("div",{key:t.id,staticClass:"position-relative w-100 my-3 form-group"},[r("label",{staticClass:"position-absolute label",attrs:{for:t.category}},[e._v(" "+e._s(t.label)+" ")]),"checkbox"===t.category?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user[t.type],expression:"user[form.type]"}],staticClass:"w-100 input",attrs:{id:t.id,name:t.category,required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.user[t.type])?e._i(e.user[t.type],null)>-1:e.user[t.type]},on:{focusout:function(r){return e.wordLimit(e.user[t.type])},change:function(r){var a=e.user[t.type],s=r.target,n=!!s.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);s.checked?o<0&&e.$set(e.user,t.type,a.concat([i])):o>-1&&e.$set(e.user,t.type,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.user,t.type,n)}}}):"radio"===t.category?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user[t.type],expression:"user[form.type]"}],staticClass:"w-100 input",attrs:{id:t.id,name:t.category,required:"",type:"radio"},domProps:{checked:e._q(e.user[t.type],null)},on:{focusout:function(r){return e.wordLimit(e.user[t.type])},change:function(r){return e.$set(e.user,t.type,null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.user[t.type],expression:"user[form.type]"}],staticClass:"w-100 input",attrs:{id:t.id,name:t.category,required:"",type:t.category},domProps:{value:e.user[t.type]},on:{focusout:function(r){return e.wordLimit(e.user[t.type])},input:function(r){r.target.composing||e.$set(e.user,t.type,r.target.value)}}}),"name"===t.category?r("span",{directives:[{name:"show",rawName:"v-show",value:e.isNameWarning,expression:"isNameWarning"}],staticClass:"position-absolute warning"},[e._v(e._s(e.nameWarning))]):e._e()])})),e.isRegistered()?r("button",{staticClass:"btn save-btn align-self-end mx-0"},[e._v(" 儲存 ")]):r("button",{staticClass:"btn login-btn w-100"},[e._v("註冊")])],2)},s=[],n=r("b85c"),i=r("5530"),o=(r("b0c0"),r("d3b7"),r("ddb0"),r("2f62")),c={data:function(){return{user:{account:"",name:"",email:"",password:"",checkPassword:""},forms:[{label:"帳號",category:"account",type:"account",id:1,data:""},{label:"名稱",category:"name",type:"name",id:2,data:""},{label:"Email",category:"email",type:"email",id:3,data:""},{label:"密碼",category:"password",type:"password",id:4,data:""},{label:"密碼確認",category:"password",type:"password-check",id:5,data:""}],nameWarning:"字數超出上限!",isNameWarning:!1}},computed:Object(i["a"])({},Object(o["b"])(["currentUser"])),created:function(){this.getcurrentUser()},methods:{getcurrentUser:function(){"Regist"===this.$route.name?this.user=Object(i["a"])({},this.user):"Setting"===this.$route.name&&(this.user=Object(i["a"])(Object(i["a"])({},this.user),this.currentUser))},isRegistered:function(){return"Regist"!==this.$route.name&&("Setting"===this.$route.name||void 0)},wordLimit:function(e){e.length>50?(event.target.classList.add("error"),console.log(event.target.classList),this.isNameWarning=!0):(event.target.classList.remove("error"),this.isNameWarning=!1)},afterSubmit:function(e){var t,r=e.target,a=new FormData(r),s=[],i=Object(n["a"])(a.values());try{for(i.s();!(t=i.n()).done;){var o=t.value;s.push(o)}}catch(c){i.e(c)}finally{i.f()}this.$emit("after-submit",s)}}},u=c,l=(r("74e3"),r("2877")),d=Object(l["a"])(u,a,s,!1,null,"3583d70e",null);t["a"]=d.exports},"74e3":function(e,t,r){"use strict";r("0192")},"879c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container d-flex flex-column align-items-center"},[r("img",{staticClass:"logo",attrs:{src:"https://i.imgur.com/WwFWS1D.png",alt:""}}),r("h1",{staticClass:"title"},[e._v("建立你的帳號")]),r("SetProfile",{on:{"after-submit":e.handleAfterSubmit}}),r("div",{staticClass:"link-group"},e._l(e.tabs,(function(t){return r("router-link",{key:t.id,staticClass:"link",attrs:{to:t.path}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)},s=[],n=r("3835"),i=r("1da1"),o=(r("96cf"),r("4575")),c=(r("b0c0"),r("2fa3")),u=function(){return localStorage.getItem("token")},l={register:function(e){var t=e.account,r=e.name,a=e.email,s=e.password,n=e.checkPassword;return c["b"].post("/users",{account:t,name:r,email:a,password:s,checkPassword:n},{headers:{Authorization:"Bearer ".concat(u())}})}},d={components:{SetProfile:o["a"]},data:function(){return{tabs:[{name:"取消",path:"/Login",id:1}],currentUser:{}}},methods:{handleAfterSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(n["a"])(e,5),s=a[0],i=a[1],o=a[2],u=a[3],d=a[4],r.prev=1,r.next=4,l.register({account:s,name:i,email:o,password:u,checkPassword:d});case 4:t.$router.push("/"),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),c["a"].fire({icon:"error",title:r.t0.response.data.message});case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}},m=d,p=(r("22ba"),r("2877")),f=Object(p["a"])(m,a,s,!1,null,"7834df0f",null);t["default"]=f.exports},fae7:function(e,t,r){}}]);
//# sourceMappingURL=chunk-04d3ee7a.ed2d46da.js.map
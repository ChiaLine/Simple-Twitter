(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-352468b0"],{"02d8":function(t,e,a){"use strict";var r=a("2fa3"),n=function(){return localStorage.getItem("token")};e["a"]={getUserProfile:function(t){return r["b"].get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(n())}})},getUserFollowings:function(t){return r["b"].get("/users/".concat(t,"/followings"),{headers:{Authorization:"Bearer ".concat(n())}})},getUserFollowers:function(t){return r["b"].get("/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(n())}})},addFollowed:function(t){var e=t.id;return r["b"].post("/followships",{id:e},{headers:{Authorization:"Bearer ".concat(n())}})},DeleteFollowed:function(t){return r["b"].delete("/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(n())}})}}},"0d81":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-follow"},[a("nav",[a("button",{staticClass:"wrapper d-flex",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.goPreviousPage.apply(null,arguments)}}},[a("img",{staticClass:"arrow",attrs:{src:"https://i.imgur.com/3y7W3fG.png",alt:""}}),a("div",{staticClass:"m-2"},[a("h5",{staticClass:"userName"},[t._v(t._s(t.user.name))]),a("h5",{staticClass:"tweetNumber"},[t._v(t._s(t.user.totalTweets)+" 推文")])])]),a("div",{staticClass:"card-buttons d-flex"},t._l(t.dataType,(function(e){return a("div",{key:e.id},[e.id===t.dataId?a("button",{staticClass:"card-button chosen",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.setDataId(e.id)}}},[t._v(" "+t._s(e.buttonName)+" ")]):a("button",{staticClass:"card-button normal",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.setDataId(e.id)}}},[t._v(" "+t._s(e.buttonName)+" ")])])})),0)]),a("FollowCards",{attrs:{"data-id":t.dataId}})],1)},n=[],s=a("5530"),o=a("1da1"),i=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"follow-cards"},t._l(t.currentCardUsers,(function(e){return a("div",{key:e.id,staticClass:"follow-card d-flex"},[a("img",{attrs:{src:t._f("emptyImage")(e.avatar),alt:"avatar"}}),a("div",{staticClass:"text-area flex-grow-1 d-flex flex-column"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex flex-column"},[a("p",{staticClass:"name"},[t._v(t._s(e.name))]),a("p",{staticClass:"account"},[t._v("@"+t._s(e.account))])]),e.isFollowed?a("button",{staticClass:"btn following-btn",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.deleteIsFollow(e.id)}}},[t._v(" 正在跟隨 ")]):a("button",{staticClass:"btn follow-btn",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addIsFollow(e.id)}}},[t._v(" 跟隨 ")])]),a("p",{staticClass:"introduction"},[t._v(t._s(e.introduction))])])])})),0)}),c=[],u=(a("a9e3"),a("2708")),l=a("02d8"),d=a("2fa3"),f={name:"FollowCards",props:{dataId:{type:Number,default:1}},mixins:[u["a"]],data:function(){return{currentCardUsers:[],isProcessing:!1}},created:function(){this.fetchCardsData()},methods:{fetchCardsData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$route.params.id,e.prev=1,1!==t.dataId){e.next=11;break}return e.next=5,l["a"].getUserFollowers(a);case 5:r=e.sent,n=r.data,t.currentCardUsers=n,0===n.length&&d["a"].fire({icon:"warning",title:"沒有跟隨者"}),e.next=17;break;case 11:return e.next=13,l["a"].getUserFollowings(a);case 13:s=e.sent,o=s.data,t.currentCardUsers=o,0===o.length&&d["a"].fire({icon:"warning",title:"沒有正在跟隨的使用者"});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),d["a"].fire({icon:"warning",title:e.t0.response.data.message});case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))()},addIsFollow:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,l["a"].addFollowed({id:t});case 4:return a.next=6,e.fetchCardsData();case 6:d["a"].fire({icon:"success",title:"成功加入跟隨"}),e.isProcessing=!1,e.$router.go(0),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試.."}),e.isProcessing=!1;case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()},deleteIsFollow:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,l["a"].DeleteFollowed(t);case 4:return a.next=6,e.fetchCardsData();case 6:d["a"].fire({icon:"success",title:"成功取消跟隨"}),e.isProcessing=!1,e.$router.go(0),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試.."}),e.isProcessing=!1;case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()}},watch:{dataId:function(){this.fetchCardsData()}}},p=f,g=(a("51d4"),a("2877")),h=Object(g["a"])(p,i,c,!1,null,"1b475c7a",null),w=h.exports,v={name:"UserFollow",components:{FollowCards:w},data:function(){return{dataId:1,dataType:[{id:1,buttonName:"跟隨者"},{id:2,buttonName:"正在跟隨"}],user:{id:-1,account:"dummyUser",name:"dummyUser",totalTweets:0}}},created:function(){var t=this.$route.query.type;console.log(t),this.checkInitialType(t);var e=this.$route.params.id;this.fetchUser(e)},methods:{setDataId:function(t){this.dataId=t},fetchUser:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].getUserProfile(t);case 3:r=a.sent,n=r.data,e.user=Object(s["a"])({},n),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0.response.data.message),d["a"].fire({icon:"warning",title:"無法取得使用者資料"});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},goPreviousPage:function(){this.$router.go(-1)},checkInitialType:function(t){"followers"===t?this.dataId=1:"followings"===t&&(this.dataId=2)}}},m=v,b=(a("53e6"),Object(g["a"])(m,r,n,!1,null,"daf19c7c",null));e["default"]=b.exports},"51d4":function(t,e,a){"use strict";a("6ef1")},"53e6":function(t,e,a){"use strict";a("72f8")},"6ef1":function(t,e,a){},"72f8":function(t,e,a){}}]);
//# sourceMappingURL=chunk-352468b0.caa5657c.js.map
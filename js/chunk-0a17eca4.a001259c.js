(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a17eca4"],{2622:function(e,t,s){},"56c3":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"replyList"},[s("ReplyListTweet",{directives:[{name:"show",rawName:"v-show",value:!e.tweetIsLoading,expression:"!tweetIsLoading"}],attrs:{tweet:e.tweet},on:{"after-show-reply-modal":e.afterShowReplyModal}}),s("div",{staticClass:"w-100"},e._l(e.replyListCards,(function(t){return s("ReplyListCards",{directives:[{name:"show",rawName:"v-show",value:!e.cardsIsLoading,expression:"!cardsIsLoading"}],key:t.id,attrs:{card:t,tweetedUser:e.tweetedUser}})})),1)],1)},a=[],i=s("1da1"),n=(s("96cf"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-100"},[s("div",{staticClass:"wrapper d-flex"},[s("img",{staticClass:"arrow",attrs:{src:"https://i.imgur.com/3y7W3fG.png",alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.goBack.apply(null,arguments)}}}),s("h5",{staticClass:"returnTweet"},[e._v("推文")])]),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"user d-flex",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toUserPage.apply(null,arguments)}}},[s("img",{staticClass:"avatar",attrs:{"data-userId":e.tweet.UserId,src:e._f("emptyImage")(e.tweet.tweetedUser.avatar),alt:""}}),s("div",{staticClass:"info py-3"},[s("h5",{staticClass:"account",attrs:{"data-userId":e.tweet.UserId}},[e._v(" "+e._s(e.tweet.tweetedUser.name)+" ")]),s("h5",{staticClass:"grey-font",attrs:{"data-userId":e.tweet.UserId}},[e._v(" @"+e._s(e.tweet.tweetedUser.account)+" ")])])]),s("p",{staticClass:"tweetContent"},[e._v(" "+e._s(e.tweet.description)+" ")]),s("div",{staticClass:"datetime d-flex"},[s("p",{staticClass:"grey-font mb-3 ml-3"},[e._v(" "+e._s(e._f("formatDate")(e.tweet.updatedAt))+" ")])])]),s("div",{staticClass:"wrapper d-flex"},[s("span",{staticClass:"record d-flex"},[s("p",{staticClass:"number"},[e._v(e._s(e.tweet.totalReplies))]),s("p",{staticClass:"text"},[e._v("回覆")])]),s("span",{staticClass:"record d-flex"},[s("p",{staticClass:"number"},[e._v(e._s(e.tweet.totalLikes))]),s("p",{staticClass:"text"},[e._v("喜歡次數")])])]),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"d-flex justify-content-between p-3 w-50"},[s("img",{staticClass:"icon",attrs:{src:e.iconReply,alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.afterShowReplyModal(e.tweet.id)}}}),s("button",{attrs:{disabled:e.isProcessing}},[s("img",{staticClass:"icon",attrs:{src:!1===e.tweet.isLiked?e.iconUnLike:e.iconIsLike,alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.clickLikeBtn(e.tweet.isLiked,e.tweet.id)}}})])])])])}),c=[],o=s("5530"),l=(s("a9e3"),s("2708")),u=s("e02c"),d=s("2fa3"),p=s("2f62"),f={mixins:[l["b"],l["a"]],props:{tweet:{type:Object,require:!0}},data:function(){return{iconUnLike:"https://i.imgur.com/fWY8yOj.png",iconIsLike:"https://i.imgur.com/LQTMNI0.png",likeIcon:"",iconReply:"https://i.imgur.com/EwJRYkP.png",isProcessing:!1}},computed:Object(o["a"])({},Object(p["b"])(["currentUser"])),methods:{clickLikeBtn:function(e,t){!1===e?(this.isProcessing=!0,this.addTweetCardLike(t),event.target.src=this.iconIsLike,this.tweet.isLiked=!0,this.tweet.totalLikes+=1):(this.isProcessing=!0,this.deleteTweetLike(t),event.target.src=this.iconUnLike,this.tweet.isLiked=!1,this.tweet.totalLikes-=1)},addTweetCardLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,u["a"].addTweetLike(e);case 4:d["a"].fire({icon:"success",title:"成功加入喜歡的內容"}),t.isProcessing=!1,s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:s.t0.response.data.message});case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},deleteTweetLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,u["a"].deleteTweetLike(e);case 4:d["a"].fire({icon:"success",title:"成功取消喜歡的內容"}),t.isProcessing=!1,s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:s.t0.response.data.message});case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},goBack:function(){this.$router.back()},toUserPage:function(e){var t=Number(e.target.dataset.userid),s=this.currentUser.id;t===s?this.$router.push({name:"UserSelf"}):t&&this.$router.push({name:"UserOther",params:{id:t}})},afterShowReplyModal:function(e){this.$emit("after-show-reply-modal",e)}}},w=f,h=(s("c40d"),s("2877")),g=Object(h["a"])(w,n,c,!1,null,"58de6275",null),m=g.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper d-flex"},[s("img",{staticClass:"avatar mt-3",attrs:{"data-userId":e.card.UserId,src:e._f("emptyImage")(e.card.repliedUser.avatar),alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toUserPage.apply(null,arguments)}}}),s("div",{staticClass:"info py-3"},[s("div",{staticClass:"user d-flex mb-1"},[s("h5",{staticClass:"account mr-1"},[e._v(e._s(e.card.repliedUser.name))]),s("h5",{staticClass:"grey-font mr-2"},[e._v("@"+e._s(e.card.repliedUser.account))]),s("h5",{staticClass:"grey-font"},[e._v(e._s(e._f("fromNow")(e.card.updatedAt)))])]),s("div",{staticClass:"ReplyUser d-flex mb-1"},[s("p",{staticClass:"grey-font mr-1"},[e._v("回覆")]),s("h5",{staticClass:"orange-font"},[e._v("@"+e._s(e.tweetedUser))])]),s("p",{staticClass:"replyContent"},[e._v(e._s(e.card.comment))])])])},k=[],C={mixins:[l["c"],l["a"]],props:{card:{type:Object,required:!0},tweetedUser:{type:String,required:!0}},computed:Object(o["a"])({},Object(p["b"])(["currentUser"])),methods:{toUserPage:function(e){var t=Number(e.target.dataset.userid),s=this.currentUser.id;t===s?this.$router.push({name:"UserSelf"}):t&&this.$router.push({name:"UserOther",params:{id:t}})}}},L=C,b=(s("bb1d"),Object(h["a"])(L,v,k,!1,null,"4d13c7ec",null)),y=b.exports,_=function(){return localStorage.getItem("token")},U={getReplyListTweet:function(e){return d["b"].get("/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(_())}})},getReplyListCards:function(e){return d["b"].get("/tweets/".concat(e,"/replies"),{headers:{Authorization:"Bearer ".concat(_())}})},addLike:function(e){return d["b"].post("/tweets/".concat(e,"/like"),null,{headers:{Authorization:"Bearer ".concat(_())}})}},x={components:{ReplyListTweet:m,ReplyListCards:y},data:function(){return{tweet:{},replyListCards:[],tweetedUser:"",tweetIsLoading:!0,cardsIsLoading:!0}},created:function(){var e=this.$route.params.id;this.fetchReplyListTweet(e),this.fetchReplyListCards(e)},methods:{fetchReplyListTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,U.getReplyListTweet(e);case 3:r=s.sent,a=r.data,t.tweet=a,t.tweetIsLoading=!1,t.tweetedUser=a.tweetedUser.account,s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](0),t.tweetIsLoading=!1,d["a"].fire({icon:"error",title:s.t0.response.data.message});case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()},fetchReplyListCards:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,U.getReplyListCards(e);case 3:r=s.sent,a=r.data,t.replyListCards=a,t.cardsIsLoading=!1,s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](0),t.cardsIsLoading=!1,d["a"].fire({icon:"error",title:s.t0.response.data.message});case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},afterShowReplyModal:function(e){this.$emit("after-show-reply-modal",e)}}},R=x,I=(s("ffba"),Object(h["a"])(R,r,a,!1,null,"8ea1e1e8",null));t["default"]=I.exports},b65e:function(e,t,s){},bb1d:function(e,t,s){"use strict";s("b65e")},c40d:function(e,t,s){"use strict";s("fb42")},e02c:function(e,t,s){"use strict";var r=s("2fa3"),a=function(){return localStorage.getItem("token")};t["a"]={getTweetCards:function(){return r["b"].get("/tweets",{headers:{Authorization:"Bearer ".concat(a())}})},addTweetLike:function(e){return r["b"].post("/tweets/".concat(e,"/like"),null,{headers:{Authorization:"Bearer ".concat(a())}})},deleteTweetLike:function(e){return r["b"].post("/tweets/".concat(e,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(a())}})}}},fb42:function(e,t,s){},ffba:function(e,t,s){"use strict";s("2622")}}]);
//# sourceMappingURL=chunk-0a17eca4.a001259c.js.map